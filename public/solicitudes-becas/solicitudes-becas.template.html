<!-- Dropdown Structure -->
<ul id="dropdown1" class="dropdown-content">
	<li><a id="editInfo" href="/#!/edit-user">Editar mi información</a></li>
    <li><a data-target="modalCambiarContra">Cambiar Contraseña</a></li>
    <li class="divider"></li>
    <li><a ng-click="cerrarSesion()"><i class="material-icons">power_settings_new</i>Cerrar Sesión</a></li>

</ul>

<div class="navbar-fixed">
	<nav class="nav-extended  blue darken-4">
		<div class="nav-wrapper">
	  		<a href="#" class="brand-logo thin" id="logoSB">
	  			<img id="logoCabecera" src="img/logo.png" />
	  			Sistema de Becas NU
	  		</a>
	  		<ul id="nav-mobile" class="right hide-on-med-and-down">
	  			<li><i class="material-icons left">account_circle</i><b>{{$ctrl.nombre}} {{$ctrl.apellido1}}</b></li>
				<li><a class="dropdown-button" href="dropdown1" data-activates="dropdown1">Perfil<i class="material-icons right">arrow_drop_down</i></a></li>
	  		</ul>
		</div>
	</nav>
</div>
	
<div class="container">
	<div class="row ">
		<div class="col xl12 l12 m12 card">
		<div class="row" style="margin-bottom: 0px;">
			<div class="col xl4 l4 m4 offset-xl0 offset-l1 offset-m1" >
				<blockquote>
					<b><h4 class="orange-text valign-wrapper"><i class=" material-icons left" style="font-size: 50px;">description</i> Solicitudes</h4></b>
				</blockquote>
			</div>
		</div>
		<div class="row">
			<div class="col xl4 l4 m4 offset-xl8 offset-l8 offset-m8">
				<a class="waves-effect waves-light btn orange {{ocultar}}" id="ocultar" ng-click="agregar()"><i class="material-icons left">add</i>Nueva Solicitud</a>
			</div>
		</div>
		<div class="row">
			<div class="col xl10 offset-xl1">
				<span class="Xcard-title"><i class="material-icons left">account_circle</i>Datos generales</span>
			</div>			
		</div>
		<div class="row">
			<div class="col xl10 l10 m10 offset-xl1 offset-l1 offset-m1 card">
				<div class="row">
					<br>
					<div class="col xl4 l4 m4">
						<b>Matricula:</b> {{dato[0].matricula}}<br/>
						<b>Nombre: </b>{{dato[0].nombre}} {{dato[0].apellido1}} {{dato[0].apellido2}}
					</div>
					<div class="col xl3 l3 m3">
						<b>Carrera: </b><br/>{{dato[0].carrera}}<br />
						<b>Semestre: </b>{{dato[0].semestre}}
					</div>
					<div class="col xl5 l5 m5">
						<b><p class="center-align">{{'Porcentaje de beca actual:'}} {{ becaAsignada }}%</p></b>
					</div>
				</div>
			</div>
		</div>

		<!--<button ng-click="$ctrl.ver = !$ctrl.ver" >Modificar Datos Personales</button>-->
		<!--<input type="button" class="btn btn-default" value="Modificar Datos Personales" ng-click="$ctrl.ver = !$ctrl.ver">-->
		<div class="row" ng-show="existPendientes">
			
			<div class="col xl10 l10 m10 offset-xl1 offset-l1 offset-m1">
				<h5 class="center-align orange-text"><i class="material-icons left">pause</i>Solicitud en Proceso</h5>
				<table class="bordered centered">
					<thead>
						<tr >
							<th>ID de Solicitud</th>
							<th>Fecha de Creación</th>
							<th>Estado</th>
							<th>Continuar</th>
							<th>Borrar</th>
						</tr>
					</thead>

					<tbody ng-repeat="u in pendientes">
						<td>{{u._id}}</td>
						<td>{{u.fecha_envio}}</td>
						<td>{{u.estado}}</td>
						<td> <button class="btn orange" ng-click="modificar(u._id)">Continuar</button></td>
						<td><button class="btn orange" ng-click="remove(u._id)">Borrar</button></td>
					</tbody>
				</table>
				<br>	
			</div>
		</div>
		
				

		<div class="row">

			<div class="col xl10 l10 m10 offset-xl1 offset-l1 offset-m1">
						<h5 class="center-align orange-text"><i class="material-icons left">history</i>Historial de Solicitudes</h5>
					
				
				<table class="bordered centered">
					<thead>
						<tr>
							<th>ID de Solicitud</th>
							<th>Fecha de envio</th>
							<th>% de beca asignada</th>
							<th>Estado</th>
							<!-- <td>% de beca final asignada</td> -->
						</tr>
					</thead>


				<tbody ng-repeat="u in terminados">
					<td>{{u._id}}</td>
					<td>{{u.fecha_envio}}</td>
					<!-- <td>{{u.porcentaje_sugerido}}</td> -->
					<td ng-if="u.porcentaje_final == -1">
						---
					</td>
					<td ng-if="u.porcentaje_final != -1">
						<b>{{u.porcentaje_final}}</b>
					</td>
					<td>{{u.estado}}</td>
				</tbody>
					
				</table>
			</div>
		</div>
		<br />

		<!-- Seccion de modal ####################################  -->

	</div>
	  <!--Modal para mostrar mensaje Contraseña Incorrecta Vuelva a Intentarlo-->
	  <div id="eliminarSolicitud" class="modal">
	    <div class="modal-content">
	    	<div class="row">
		    	<hr />
		      	<h4 class="center-align">¿ Esta seguro que desea eliminar ?</h4>
	      	</div>
	    </div>
	    <div class="modal-footer">
	  
	    	<!--<a class="modal-action modal-close waves-effect waves-green btn-flat teal lighten-2">Cancelar</a>-->
	    	<a class='waves-effect waves-light btn modal-close orange'>Cancelar</a>
	    	<a class='waves-effect waves-light btn orange' ng-click='$ctrl.eliminarSol()'>Aceptar</a>

	    <!--  <a class="modal-action modal-close waves-effect waves-green btn-flat">Cancelar</a>
	      <a class="waves-effect waves-light btn" ng-click=" $ctrl.cancel()">Aceptar</a>-->
	    </div>
	  </div>



		<!--Modal cambiar contraseña-->
	  <div id="modalCambiarContra" class="modal modal-fixed-footer">
	  	<form ng-submit="$ctrl.modalCambiarContra()">
		    <div class="modal-content">
		      <h4><i class="material-icons prefix">lock</i>  Cambiar mi contraseña</h4>
		      <hr />
		      <div class="row">
		      	<div class="row">
	      			<div class="col xl4 l4 m5  offset-xl4">

						<label>Contraseña Actual:<span>*</span></label>

						<input class="validate" type="password" ng-model="$ctrl.password_Actual" required pattern="^[a-zA-Z0-9ñÑ]{1,30}$" title="Verifique que el campo no contenga caracteres especiales" maxlength="30" placeholder="Contraseña">

					</div>
				</div>
				<div class="row">
					<div class="col xl4 l4 m5 offset-xl4">
						<label>Contraseña Nueva:<span>*</span></label>
						<input class="validate" type="password" ng-model="$ctrl.password_Nueva" required pattern="^[a-zA-Z0-9ñÑ]{1,30}$" maxlength="30" title="Verifique que el campo no contenga caracteres especiales" placeholder="Contraseña">
					</div>
				</div>
				<div class="row">
					<div class="col xl4 l4 m5 offset-xl4">
						<label>Repetir Contraseña Nueva:<span>*</span></label>
						<input class="validate" type="password" ng-model="$ctrl.password_Repetir" required pattern="^[a-zA-Z0-9ñÑ]{1,30}$" maxlength="30" title="Verifique que el campo no contenga caracteres especiales" placeholder="Contraseña">
					</div>
				</div>
		      </div>
		    </div>
		    <div class="modal-footer">
		      <!--<a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>-->
		      <!--<div class="col xl2 l3 m4 offset-xl6 offset-l6 offset-m6"><input class="btn btn-default" value="Cancelar"></div>-->
		      <div class="col xl2 l3 m4 offset-xl6 offset-l6 offset-m6"><input type="submit" class="btn orange" value="Guardar Cambios"></div>
		      <a class="waves-effect waves-light btn orange" ng-click=" $ctrl.cancel()">Cancelar</a>
		    </div>
		</form>    

	  </div>





	  <!--Modal para mostrar mensaje Contraseña Incorrecta Vuelva a Intentarlo-->
	  <div id="contraseniaInco" class="modal">
	    <div class="modal-content">
	    	<div class="row">
		    	<hr />
		    	<h4 class="red-text">Error ! <i class="material-icons small black-text">mood_bad</i> </h4>
      			<p class="center-align">Contraseña Incorrecta</p>
		      	<!--<h4 class="center-align">Error contraseña Incorrecta</h4>
		      	<h4 class="center-align">:(</h4>-->
	      	</div>
	    </div>
	    <div class="modal-footer">
	      <a href="" class="modal-action modal-close waves-effect waves-green btn-flat orange">Aceptar</a>
	    </div>
	  </div>

	  <!--Modal para mostrar mensaj La contraseña Nueva y la contraseña repetir no coinciden-->
	  <div id="repetircontraseniaInco" class="modal">
	    <div class="modal-content">
	    	<div class="row">
		    	<hr />
		      	<!--<h4 class="center-align">La contraseña Nueva y la contraseña repetir no coinciden</h4>
		      	<h4 class="center-align">:(</h4>-->
		      	<h4 class="red-text">Error ! <i class="material-icons small black-text">mood_bad</i> </h4>
      			<p class="center-align">La contraseña Nueva y la contraseña repetir no coinciden</p>
	      	</div>
	    </div>
	    <div class="modal-footer">
	      <a href="" class="modal-action modal-close waves-effect waves-green btn-flat orange">Aceptar</a>
	    </div>
	  </div>



	  <!--Modal para mostrar mensaje Contraseña cambiada correctamente-->
	  <div id="cambiarContraBien" class="modal">
	    <div class="modal-content">
	    	<div class="row">
		    	<hr />
		      	<h4 class="center-align">Actualización Realizada Exitosamente.!</h4>
		      	<h4 class="center-align">:)</h4>
	      	</div>
	    </div>
	    <div class="modal-footer">
	      <a href="" class="modal-action modal-close waves-effect waves-green btn-flat orange">Aceptar</a>
	    </div>
	  </div>

	  <!-- ********************    Modificar Datos personales ********************************************* -->
	  <div id="modalCambiarDatos" class="modal modal-fixed-footer">
	  	<form ng-submit="$ctrl.modalCambiarDatos()">
		    <div class="modal-content">
		      <h4><i class="material-icons prefix">assignment_ind</i>  Editar mi información</h4>
		      <hr />
		      <div class="row">

		      	<div class="row">
					<div class="col xl3 l4 m5 offset-xl1">
						<label>Idioma, Lenguaje o Dialecto a parte del español:</label>
						<select class="browser-default" ng-model="$ctrl.idiomaExt">
							<option ng-repeat="leng in $ctrl.lenguas">{{leng}}</option>
						</select>
					</div>
					<div class="col xl3 l4 m5">
						<label>Estado Civil:<span>*</span></label>
						<select class="browser-default" ng-model="$ctrl.edoCivil" required>
							<option value="" disabled>Seleccione una Opción</option>
							<option ng-repeat="ec in $ctrl.estadosCivil">{{ec}}</option>
						</select>
					</div>
					<div class="col xl3 l4 m5">
						<label>Telefono Celular (lada):</label>
						<input type="text" ng-model="$ctrl.telefono" pattern="^[0-9\\\s]{10,20}$" title="Verifique que el formato sean solo número"  placeholder="000 000 00 00">
					</div>
				</div>
				<div class="row">
					<div class="col xl7 l4 m5 offset-xl3">
						<label>¿Su estancia en la Universidad, implica recidencia distinta a la familia?<span>*</span></label>
						
					</div>
					<div class="col xl3 l4 m5 offset-xl5">
						<input id="No" type="radio" ng-click="$ctrl.viewRecidencia()" ng-model="$ctrl.recidencia" value="No"><label for="No">No</label>
						<label><input id="Si" type="radio" ng-click="$ctrl.viewRecidencia()" ng-model="$ctrl.recidencia" value="Si"><label for="Si">Si</label>
					</div>
				</div>
				
				<br>
				<div><label>Domicilio donde vivirá mientras estudias:</label></div>
				<div class="row">				
					<div class="col xl3 l4 m5">
						<label>Nombre Calle:<span>*</span></label>
						<input type="text" placeholder="Calle" ng-model="$ctrl.calle" required pattern="([0-9]{0,3}?[a-zA-Z\\\sáéíóú.]{0,40})|([a-zA-Z\\\sáéíóú.]{0,40}?[0-9]{0,3})" title="Verifique que no contenga caracteres especiales o solo números">
					</div>
					<div class="col xl3 l4 m5">
						<label>Número de Calle:<span>*</span></label>
						<input type="text" placeholder="No." ng-model="$ctrl.numCalle" required pattern="^[0-9]{0,3}|(s/n)|(S/N)$" title="Verifique que no contenga caracteres especiales, solo números o (s/n)">
					</div>
					<div class="col xl3 l4 m5">
						<label>Colonia o Barrio:<span></span></label>
						<input type="text" placeholder="Colonia o Barrio" ng-model="$ctrl.colonia" pattern="([0-9]{0,3}?[a-zA-Z\\\sáéíóú.]{0,40})|([a-zA-Z\\\sáéíóú.]{0,40}?[0-9]{0,3})" title="Verifique que no contenga caracteres especiales o solo números">
					</div>
					<div class="col xl3 l4 m5">
						<label>Municipio:<span>*</span></label>
						<input type="text" placeholder="Municipio" ng-model="$ctrl.municipio" required pattern="^[a-zA-Z\\\sáéíóú.]{0,45}$" title="Verifique que no contenga caracteres especiales ni números, solo letras">
					</div>
				</div>

				<div class="row">
					<div class="col xl3 l4 m5" ng-style="$ctrl.viewRecid">
						<label>Nombre, Dueño de la Casa:</label>
						<input type="text" placeholder="Nombre de la casa de huésped o del propietario" ng-model="$ctrl.nombreHuesped" pattern="^[a-zA-Z\\\sáéíóú]{0,40}$" title="Verifique que no contenga caracteres especiales, solo letras">
					</div>
					<div class="col xl3 l4 m5" ng-style="$ctrl.viewRecid">
						<label>Parentesco</label>
						<select class="browser-default" ng-model="$ctrl.parentesco">
							<option value="" disabled>Seleccione una Opción</option>
							<option ng-repeat="p in $ctrl.parentescos">{{p}}</option>
						</select>
					</div>
				</div>


		      </div>
		    </div>
		    <div class="modal-footer">
		      <!--<a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>-->
		      <!--<div class="col xl2 l3 m4 offset-xl6 offset-l6 offset-m6"><input class="btn btn-default" value="Cancelar"></div>-->
		      <div class="col xl2 l3 m4 offset-xl6 offset-l6 offset-m6"><input type="submit" class="btn orange" value="Guardar Cambios"></div>
		      <!--<a class="waves-effect waves-light btn" ng-click=" $ctrl.cancel2()">Cancelar</a>-->
		      <a class="btn orange modal-action modal-close waves-effect waves-green btn-flat">Cancelar</a>
		    </div>
		</form>    

	  </div>







	</div>
</div>

	<script type="text/javascript" src="js/query.js"></script>
	<footer-becas></footer-becas>